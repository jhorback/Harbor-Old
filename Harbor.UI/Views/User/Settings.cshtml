@model Harbor.UI.Models.Setting.SettingsViewModel
@using Harbor.UI.Extensions
@{
	ViewBag.Title = "Website Settings";
}
@section head {
	@Html.Jst("User/SettingsTemplates")
	@Html.Jst("PageSelector/PageSelectorTemplates")	
}
@section scripts {
	@Scripts.Render("~/Scripts/Apps/Settings.js")
	@Scripts.Render("~/scripts/apps/PageSelector.js")
	<script>
		Settings.start();
	</script>
}
<div id="settings-main">
	<div class="page-header readable centered">
		<h1>Website Settings</h1>
	</div>
	<div class="page-body readable centered">
		<div class="page-content display-none">
			@if (Model.CanUpdateSiteSettings)
			{
				<fieldset>
					<legend>Navigation</legend>
					<div class="pad-top settings-navigation">
						<button id="settings-updatenav">Update navigation</button>
						<div class="attn" id="settings-updatemsg">
							
						</div>
						<div class="quiet">
							Update the website navigation.
						</div>
					</div>
				</fieldset>
			}
			@if (Model.CanViewUsers)
			{
				<fieldset>
					<legend>Website users</legend>
					<div>
						<a class="text-large" href="~/User/Admin">User Administration</a>
					</div>
					<div>
						<p>
							Add, edit, update users and their permissions.
						</p>
					</div>
				</fieldset>
			}
			@if (Model.CanUpdateSiteSettings)
			{
				<fieldset>
					<legend>Home page</legend>
					<div class="pad settings-homepage">
						@if (Model.HomePage != null)
						{
							@Html.Partial("~/Views/User/_HomePageSetting.cshtml", Model.HomePage)
						}
						else
						{
							@Html.Partial("~/Views/User/_DefaultHomePage.cshtml")
						}
					</div>
					<div>
						<button id="settings-changehome">Change the home page</button>
						<button id="settings-resethome" class="@(Model.HomePage == null ? "display-none" : "")">Reset</button>
					</div>
				</fieldset>
							
			}
			
			@if (Model.CanUpdateSiteSettings)
			{
				<fieldset class="col2"> @*jch* make col1 stacked by default and add a inline scope for fieldsets?*@
					<legend>Sign in link</legend>
					<div class="form-field">
						<label for="showsigninlink">Show or hide the sign in link</label>
						<div class="switch">
							<input type="checkbox" name="showSignInLink" id="showSignInLink">
							<label for="showSignInLink">
								<span class="on">Show</span>
								<span class="off">Hide</span>
							</label>
						</div>
					</div>
					<div>
						<p>
							If it is hidden, you can go to
							<a href="~/user/signin">@Url.Content("~/user/signin")</a> to sign in.
						</p>
					</div>
				</fieldset>
			}
			@if (Model.CanUpdateSystemSettings)
			{ 
				<fieldset class="clear">
					<legend>Application name</legend>
					<div class="pad">
						<div class="form-field editable display-inline-block" tabindex="0" id="settings-applicationName">
							<span data-bind="applicationName"></span>
						</div>
					</div>
				</fieldset>
				<fieldset>
					<legend>Development</legend>
					<div class="text-large pad-left">
						<a href="@Url.Action("Index", "StyleGuide")">Style Guide</a>
					</div>
					<div class="text-large pad-left">
						<a href="@Url.Action("JavaScriptPackages", "Home")">JavaScript Packages</a>
					</div>
					<div class="text-large pad-left">
						<a href="@Url.Action("JavaScriptTests", "Home")">JavaScript Tests</a>
					</div>
				</fieldset>
			}
		</div>
	</div>
</div>
<div id="settings-modal"></div>