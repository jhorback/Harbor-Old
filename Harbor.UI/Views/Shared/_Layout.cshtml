@using Harbor.Domain.Security
@using Harbor.UI.Extensions
@using Harbor.UI.JSPkgs
@using Harbor.UI.Models.JSPM.Extensions
@{
	// make this an html helper?
	if (ViewBag.Title == null) {
		ViewBag.Title = Harbor.UI.HarborApplication.AppName;
	} else {
		ViewBag.Title += " - " + Harbor.UI.HarborApplication.AppName;	
	}
	
	var footerText = new HtmlString(
		string.Format("{0} &copy; {1}",
			Request.ServerVariables["SERVER_NAME"],
			DateTime.Now.Year));
			
	var gaAccount = Harbor.UI.HarborApplication.GoogleAnalyticsAccount;
}
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<title>@ViewBag.Title</title>
		@Html.InstallJavaScriptPackage(ModernizrShivPkg.PackageName)
		@Html.InstallJavaScriptPackage(SiteStylePkg.PackageName)
		@Html.CurrentTheme()
		@RenderSection("head", required: false)
		@if (string.IsNullOrEmpty(gaAccount) == false) {
			<script type="text/javascript">
				var _gaq = _gaq || [];
				_gaq.push(['_setAccount', '@gaAccount']);
				_gaq.push(['_trackPageview']);
				(function () {
					var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
					ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
					var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
				})();
			</script>
		}
	</head>
	<body>
		<div id="frame">
			<header id="frame-header">
				<div id="frame-logo">
					<a href="~/">
						@Harbor.UI.HarborApplication.AppName
					</a>
				</div>	
				<nav id="frame-nav">
					@Html.Action("FrameNav", "Home")
				</nav>
				<nav id="frame-session">
					@*<a id="signin-link" href="@Url.Action("SignIn", "User")">Sign In</a>*@
				</nav>
			</header>	
			<div id="frame-body">
			@RenderBody()
			</div>
			<footer id="frame-info">
				<div>
					<div>
					@if (Html.UserHasPermit(UserFeature.SiteSettings) || Html.UserHasPermit(UserFeature.SystemSettings))
					{
						<a href="~/Home/About">@footerText</a>
					} else
					{
						@footerText
					}
					</div>
					<div class="quiet media-print"><small>@Harbor.UI.HarborApplication.FullVersion - @DateTime.Now</small></div>
				</div>
			</footer>
		</div>
		<script>
			if (typeof window.JSON === 'undefined') { document.write('<script src="@Url.Content("~/Scripts/json2.min.js")"><\/script>'); }
			window.baseUrl = "@Url.Content("~/")";
		</script>
		@Html.InstallJavaScriptPackage(JQueryPkg.PackageName)
		@if (Request.Browser.Browser == "IE" && Request.Browser.MajorVersion < 9)
		{
			@* Add media query support to older versions of IE *@	
			@Scripts.Render("~/Scripts/respond.js")
		}
		@Html.InstallJavaScriptPackage(ApplicationPkg.PackageName)
		@Html.Action("SessionApp", "User")
		@Html.InstallJavaScriptPackage(PageAdderPkg.PackageName)

		@RenderSection("scripts", required: false)

		@Html.InstallJavaScriptPackage(JQueryUICorePkg.PackageName)
		@Html.InstallJavaScriptPackage(JQueryUIInteractionsPkg.PackageName)
		<div id="theme1"></div>
		<div id="theme2"></div>
		<div id="theme3"></div>
		<div id="theme4"></div>
		<div id="theme5"></div>
	</body>
</html>