@import "_$color.scss";


$type-font-family: "OpenSans", "sans-serif" 	                !default;
$type-font-family-medium: "OpenSansMedium", "sans-serif" 	    !default;
$type-font-family-mono: Monaco, Menlo, 'Courier New', monospace	!default;

// 40 - 60 words per line 0.625 character width at 16 px
$type-char-width: 0.75; // 0.625
$type-width-readable: 60 * $type-char-width * 1em;
// 30 - 40 worlds per line
$type-width-readable-short: 40 * $type-char-width * 1em;



@mixin type-classes {
    h1, h2, h3, h4, h5, h6 {
        font-weight: 400;
    }
    h1 {
        @include type-display1;
    }
    h2 {
        @include type-title;
    }
    h3 {
        @include type-subhead1;
    }
    h4, h5, h6 {
        @include type-subhead2;
    }
    p {
        @include type-body1;
        margin: 0 0 1.5em 0; // jch! this cannot be right
        &:last-of-type {
			margin-bottom: 0;
		}
    }
    small {
        @include type-caption;
    }
    .type-display4 {
        @include type-display4;
    }
    .type-display3 {
        @include type-display3;
    }
    .type-display2 {
        @include type-display2;
    }
    .type-display1 {
        @include type-display1;
    }
    .type-headline {
        @include type-headline;
    }
    .type-title {
        @include type-title;
    }
    .type-subhead2 {
        @include type-subhead2;
    }
    .type-subhead1 {
        @include type-subhead1;
    }
    .type-body2 {
        @include type-body2;
    }
    .type-body1 {
        @include type-body1;
    }
    .type-caption {
        @include type-caption;
    }
    .type-width-readable {
        max-width: $type-width-readable;
    }
    .type-width-readable-short {
        max-width: $type-width-readable-short;
    }
    div, section {
        &.lead1 {
            margin-bottom: 1.5em;
        }
        &.lead2 {
            margin-bottom: 4em;
        }
    }
}

@mixin type-classes-theme {
    h1, h3, caption {
        @include color-quiet;
    }
}

@mixin type-font-face {
    $opensans-regular-fontpath: "../../font/opensans/OpenSans-Regular-";
    $opensans-medium-fontpath: "../../font/opensans/OpenSans-Semibold-";

    @font-face {
        font-family: 'OpenSans';    
        src: url($opensans-regular-fontpath + 'webfont.eot');
        src: url($opensans-regular-fontpath + 'webfont.eot?#iefix') format('embedded-opentype'),
             url($opensans-regular-fontpath + 'webfont.woff') format('woff'),
             url($opensans-regular-fontpath + 'webfont.ttf') format('truetype'),
             url($opensans-regular-fontpath + 'webfont.svg#OpenSansRegular') format('svg');
        font-weight: normal;
        font-weight: 400;
        font-style: normal;
    }

     @font-face {
        font-family: 'OpenSansMedium';    
        src: url($opensans-medium-fontpath + 'webfont.eot');
        src: url($opensans-medium-fontpath + 'webfont.eot?#iefix') format('embedded-opentype'),
             url($opensans-medium-fontpath + 'webfont.woff') format('woff'),
             url($opensans-medium-fontpath + 'webfont.ttf') format('truetype'),
             url($opensans-medium-fontpath + 'webfont.svg#OpenSansRegular') format('svg');
        font-weight: normal;
        font-weight: 600;
        font-style: normal;
    }
}


@mixin type-display4 {
    // 112px regular font, 118px line height, quiet color, no lead
    font-family: $type-font-family;
    @include type-generate(112px, 118px, $includeLead: false);
}

@mixin type-display3 {
    // 56px regular font, 60px line height, quiet color, no lead
    font-family: $type-font-family;
    @include type-generate(56px, 60px, $includeLead: false);
}

@mixin type-display2 {
    // 45px regular font, 48px line height + lead, quiet color
    font-family: $type-font-family;
    @include type-generate(45px, 48px, $includeLead: true);
}

@mixin type-display1 {
    // 34px regular font, 40px line height + lead, quiet color
    font-family: $type-font-family;
    @include type-generate(34px, 40px, $includeLead: true);
}

@mixin type-headline {
    // 24px regular font, 32px line height + lead, standard color
    font-family: $type-font-family;
    @include type-generate(24px, 32px, $includeLead: true);

}

@mixin type-title {
    // 20px medium font, 30px line height, standard color, no lead
    font-family: $type-font-family-medium;
    @include type-generate(20px, 30px, $includeLead: false);

}

@mixin type-subhead2 {
    // 16px regular font, 28px line height + lead, standard color
    font-family: $type-font-family-medium;
    @include type-generate(16px, 28px, $includeLead: true);
}

@mixin type-subhead1 {
    // 16px medium font, 24px line height + lead, quiet color
    font-family: $type-font-family;
    @include type-generate(16px, 24px, $includeLead: true);

}

@mixin type-body2 {
    font-family: $type-font-family-medium;
    @include type-generate(14px, 24px, $includeLead: true);
}

@mixin type-body1 {
    font-family: $type-font-family;
    @include type-generate(14px, 20px, $includeLead: true);
}

@mixin type-caption {
    // 12px regular font, 17px line height, quiet color, no lead
    font-family: $type-font-family;
    @include type-generate(12px, 17px, $includeLead: true);

}

@mixin type-button {
    // 14px regular font, 24px line height, standard color, no lead
    font-family: $type-font-family-medium;    
    text-transform: uppercase;
    @include type-generate(14px, 24px, $includeLead: false);
    
    // jch* - initial button when hacking
    //   text-transform: uppercase;
    //   font-weight: 600;
	//   font-family: $button-font-family;
	//   font-size: $body-font-size *.8;
	//   line-height: $body-line-height * 1.3;
}


@mixin type-generate($targetPx, $targetLineHeightPx, $includeLead) {
    $global-base-px: 16px;
    $line-height: $targetLineHeightPx / $targetPx;

    font-size: px-to-em($targetPx, $global-base-px);
    line-height: $line-height;

    @if $includeLead {
        $margin-top: (($targetLineHeightPx - $targetPx) / 2) * -1;
        $margin-bottom: ($targetLineHeightPx) - $margin-top - $global-base-px; // 16px
        &.lead {
            margin: px-to-em($margin-top, $targetPx) 0 px-to-em($margin-bottom, $targetPx) 0 !important;
        }
    }

}

@function px-to-em($targetPx, $basePx) {
    @return (parse-int($targetPx) / parse-int($basePx)) * 1em;
}

@function parse-int($number) {
  @return $number / ($number * 0 + 1);
}
